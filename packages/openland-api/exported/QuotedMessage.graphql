fragment QuotedMessage on ModernMessage {
  __typename
  date
  fallback
  id
  message
  message
  sender {
    __typename
    ...UserShort
  }
  senderBadge {
    __typename
    ...UserBadge
  }
  source {
    __typename
    ... on MessageSourceChat {
      chat {
        __typename
        ... on PrivateRoom {
          id
        }
        ... on SharedRoom {
          id
        }
      }
    }
  }
  spans {
    __typename
    ...SpanFragment
  }
  ... on GeneralMessage {
    attachments {
      __typename
      fallback
      ... on MessageAttachmentFile {
        fileId
        fileMetadata {
          __typename
          imageFormat
          imageHeight
          imageWidth
          isImage
          mimeType
          name
          size
        }
        filePreview
        id
      }
      ... on MessageRichAttachment {
        fallback
        icon {
          __typename
          metadata {
            __typename
            imageFormat
            imageHeight
            imageWidth
            isImage
            mimeType
            name
            size
          }
          url
        }
        id
        image {
          __typename
          metadata {
            __typename
            imageFormat
            imageHeight
            imageWidth
            isImage
            mimeType
            name
            size
          }
          url
        }
        imageFallback {
          __typename
          photo
          text
        }
        subTitle
        text
        title
        titleLink
        titleLinkHostname
      }
    }
    commentsCount
    edited
    id
  }
  ... on StickerMessage {
    date
    id
    reactions {
      __typename
      reaction
      user {
        __typename
        ...UserShort
      }
    }
    sender {
      __typename
      ...UserShort
    }
    senderBadge {
      __typename
      ...UserBadge
    }
    source {
      __typename
      ... on MessageSourceChat {
        chat {
          __typename
          ... on PrivateRoom {
            id
          }
          ... on SharedRoom {
            id
          }
        }
      }
    }
    sticker {
      __typename
      ... on ImageSticker {
        id
        image {
          __typename
          ... on ImageRef {
            uuid
          }
        }
        pack {
          __typename
          ... on StickerPack {
            id
            title
          }
        }
      }
    }
  }
}