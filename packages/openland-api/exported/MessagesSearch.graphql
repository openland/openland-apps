query MessagesSearch($after: String, $first: Int!, $query: String!, $sort: String) {
  messagesSearch(after: $after, first: $first, query: $query, sort: $sort) {
    __typename
    edges {
      __typename
      cursor
      node {
        __typename
        chat {
          __typename
          ... on PrivateRoom {
            id
            user {
              __typename
              id
              name
            }
          }
          ... on SharedRoom {
            canEdit
            id
            isChannel
            kind
            membership
            photo
            role
            title
          }
        }
        message {
          __typename
          date
          fallback
          id
          message
          sender {
            __typename
            firstName
            id
            name
            photo
          }
          senderBadge {
            __typename
            ...UserBadge
          }
          ... on GeneralMessage {
            attachments {
              __typename
              fallback
              id
              ... on MessageAttachmentFile {
                fileId
                fileMetadata {
                  __typename
                  imageFormat
                  isImage
                }
                id
              }
            }
            id
            quotedMessages {
              __typename
              id
            }
          }
        }
      }
    }
    pageInfo {
      __typename
      currentPage
      hasNextPage
      hasPreviousPage
      itemsCount
      openEnded
      pagesCount
    }
  }
}