fragment VoiceChatParticipant on VoiceChatParticipant {
    id
    user {
        id
        name
        firstName
        photo
    }
    status
    handRaised
}

fragment VoiceChatEntity on VoiceChat {
    id
    title
    active
    adminsCount
    speakersCount
    listenersCount
    me {
        ...VoiceChatParticipant
    }
}

fragment VoiceChatWithSpeakers on VoiceChat {
    ...VoiceChatEntity
    speakers {
        ...VoiceChatParticipant
    }
}

query VoiceChat($id: ID!) {
    voiceChat(id: $id) {
        ...VoiceChatWithSpeakers
    }
}

query VoiceChatListeners($id: ID!, $first: Int!, $after: String) {
    voiceChatListeners(id: $id, first: $first, after: $after) {
        items {
            ...VoiceChatParticipant
        }
        cursor
    }
}

query ActiveVoiceChats($first: Int!, $after: String) {
    activeVoiceChats(first: $first, after: $after) {
        cursor
        items {
            ...VoiceChatWithSpeakers
        }
    }
}

query VoiceChatUser($uid: ID!) {
    user(id: $uid) {
        id
        followingCount
        followersCount
        followedByMe
    }
}

query VoiceChatControls($id: ID!) {
    voiceChat(id: $id) {
        id
        me {
            id
            user {
                id
                shortname
            }
            status
            handRaised
        }
    }
}

mutation VoiceChatCreate($input: VoiceChatInput!) {
    voiceChatCreate(input: $input) {
        ...VoiceChatWithSpeakers
    }
}

mutation VoiceChatJoin($id: ID!) {
    voiceChatJoin(id: $id) {
        ...VoiceChatWithSpeakers
    }
}

mutation VoiceChatUpdate($id: ID!, $input: VoiceChatInput!) {
    voiceChatUpdate(id: $id, input: $input) {
        id
    }
}

mutation VoiceChatEnd($id: ID!) {
    voiceChatEnd(id: $id) {
        id
    }
}

mutation VoiceChatLeave($id: ID!) {
    voiceChatLeave(id: $id)
}

mutation VoiceChatUpdateAdmin($id: ID!, $uid: ID!, $admin: Boolean!) {
    voiceChatUpdateAdmin(id: $id, uid: $uid, admin: $admin)
}

mutation VoiceChatKick($id: ID!, $uid: ID!) {
    voiceChatKick(id: $id, uid: $uid)
}

mutation VoiceChatPromote($id: ID!, $uid: ID!) {
    voiceChatPromote(id: $id, uid: $uid)
}

mutation VoiceChatDemote($id: ID!, $uid: ID!) {
    voiceChatDemote(id: $id, uid: $uid)
}

mutation VoiceChatRaiseHand($id: ID!, $raised: Boolean!) {
    voiceChatRaiseHand(id: $id, raised: $raised)
}

query VoiceChatEventsState($id: ID!) {
    voiceChatEventsState(id: $id) {
        state
    }
}

subscription VoiceChatEvents($id: ID!, $fromState: String!) {
    voiceChatEvents(fromState: $fromState, id: $id) {
        state
        events {
            ... on VoiceChatParticipantUpdatedEvent {
                chat {
                    ...VoiceChatEntity
                }
                participant {
                    ...VoiceChatParticipant
                }
            }
            ... on VoiceChatUpdatedEvent {
                chat {
                    ...VoiceChatEntity
                }
            }
        }
    }
}

subscription ActiveVoiceChatsEvents {
    activeVoiceChatsEvents {
        ... on VoiceChatUpdatedEvent {
            chat {
                ...VoiceChatWithSpeakers
            }
        }
    }
}
