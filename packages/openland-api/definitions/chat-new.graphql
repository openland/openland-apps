fragment ChatNewMessageFragment on ModernMessage {
    id
    date
    seq
    sender {
        id
    }
    message
    fallback
}

query ChatNewReadLastRead($chatId: ID!) {
    message: lastReadedMessage(chatId: $chatId) {
        id
    }
}

query ChatNewGetMessage($id: ID!) {
    message(messageId: $id) {
        ...ChatNewMessageFragment
    }
}

query ChatNewLoadBefore($chatId: ID!, $before: ID!, $limit: Int!) {
    batch: gammaMessages(chatId: $chatId, first: $limit, before: $before) {
        messages {
            ...ChatNewMessageFragment
        }
        haveMoreBackward
    }
}

query ChatNewLoadAfter($chatId: ID!, $after: ID!, $limit: Int!) {
    batch: gammaMessages(chatId: $chatId, first: $limit, after: $after) {
        messages {
            ...ChatNewMessageFragment
        }
        haveMoreForward
    }
}

query ChatNewDialogsState {
    state: dialogsState {
        state
    }
}

query ChatNewChatState($chatId: ID!) {
    state: conversationState(id: $chatId) {
        state
    }
}
