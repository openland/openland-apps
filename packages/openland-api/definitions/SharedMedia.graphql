query SharedMedia($chatId: ID!, $mediaTypes: [SharedMediaType!]!, $first: Int!, $after: ID) {
    sharedMedia: chatSharedMedia(
        chatId: $chatId
        mediaTypes: $mediaTypes
        first: $first
        after: $after
    ) {
        pageInfo {
            hasNextPage
            currentPage
        }
        edges {
            node {
                message {
                    ... on GeneralMessage {
                        id
                        fallback
                        date
                        sender {
                            id
                            name
                        }
                        attachments {
                            ... on MessageAttachmentFile {
                                id
                                fileMetadata {
                                    name
                                    isImage
                                    imageFormat
                                    mimeType
                                    imageWidth
                                    imageHeight
                                    size
                                }
                                filePreview
                                fileId
                                fallback
                            }
                            ... on MessageRichAttachment {
                                id
                                title
                                text
                                titleLink
                                imagePreview
                                image {
                                    url
                                }
                                imageFallback {
                                    photo
                                }
                                keyboard {
                                    buttons {
                                        id
                                        title
                                        url
                                    }
                                }
                            }
                        }
                    }
                }
            }
            cursor
        }
    }
}
query SharedMediaCounters($chatId: ID!) {
    counters: chatSharedMediaCounters(chatId: $chatId) {
        links
        images
        documents
        videos
    }
}

query PicSharedMedia($chatId: ID!, $first: Int!, $after: ID, $before: ID, $around: ID) {
    chatSharedMedia(chatId: $chatId, mediaTypes: [IMAGE], first: $first, after: $after, before: $before, around: $around) {
        pageInfo {
            hasNextPage
            hasPreviousPage
            currentPage
            pagesCount
            itemsCount
        }
        edges {
            cursor
            index
            node {
                message {
                    ... on GeneralMessage {
                        id
                        date
                        sender {
                            id
                            name
                        }
                        attachments {
                            ... on MessageAttachmentFile {
                                id
                                fileMetadata {
                                    name
                                    isImage
                                    imageFormat
                                    mimeType
                                    imageWidth
                                    imageHeight
                                    size
                                }
                                filePreview
                                fileId
                                fallback
                            }
                        }
                    }
                }
            }
        }
    }
}
