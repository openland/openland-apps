query InitFeed($first: Int!) {
    feed: alphaHomeFeed(first: $first) {
        items {
            ...FeedItemFull
        }
        cursor
    }
    drafts: alphaFeedMyDraftsChannel {
        ...FeedChannelFull
    }
}

query FeedLoadMore($first: Int!, $after: String) {
    feed: alphaHomeFeed(first: $first, after: $after) {
        items {
            ...FeedItemFull
        }
        cursor
    }
}
query FeedSubscriptions($first: Int!, $after: ID) {
    channels: alphaFeedMySubscriptions(first: $first, after: $after) {
        items {
            ...FeedChannelFull
        }
        cursor
    }
}
query FeedWritableChannels($first: Int!, $after: ID) {
    channels: alphaWritableChannels(first: $first, after: $after) {
        items {
            ...FeedChannelFull
        }
        cursor
    }
}
query FeedChannelsSearch($query: String, $sort: String, $first: Int!, $after: String) {
    search: alphaFeedChannelSearch(query: $query, sort: $sort, first: $first, after: $after) {
        edges {
            node {
                ...FeedChannelFull
            }
            cursor
        }
        pageInfo {
            hasNextPage
            hasPreviousPage
            itemsCount
            pagesCount
            currentPage
            openEnded
        }
    }
}
query FeedRecommendedChannels($first: Int!, $after: String) {
    search: alphaRecommendedChannels(first: $first, after: $after) {
        edges {
            node {
                ...FeedChannelFull
            }
            cursor
        }
        pageInfo {
            hasNextPage
            hasPreviousPage
            itemsCount
            pagesCount
            currentPage
            openEnded
        }
    }
}
query FeedChannel($id: ID!) {
    channel: alphaFeedChannel(id: $id) {
        ...FeedChannelFull
    }
}
query FeedChannelWriters($id: ID!, $first: Int!, $after: ID) {
    writers: alphaFeedChannelAdmins(id: $id, first: $first, after: $after) {
        items {
            user {
                ...UserShort
            }
            role
        }
        cursor
    }
}
query FeedChannelSubscribers($channelId: ID!, $query: String, $first: Int!, $after: String) {
    subscribers: alphaFeedChannelSubscribers(
        channelId: $channelId
        query: $query
        first: $first
        after: $after
    ) {
        edges {
            node {
                user {
                    ...UserShort
                }
                role
            }
            cursor
        }
        pageInfo {
            hasNextPage
            hasPreviousPage
            itemsCount
            pagesCount
            currentPage
            openEnded
        }
    }
}
query FeedChannelContent($id: ID!, $first: Int!, $after: String) {
    content: alphaFeedChannelContent(id: $id, first: $first, after: $after) {
        items {
            ...FeedItemFull
        }
        cursor
    }
}
mutation FeedChannelCreate(
    $title: String!
    $about: String
    $photoRef: ImageRefInput
    $global: Boolean
) {
    channel: alphaFeedCreateChannel(
        title: $title
        about: $about
        photoRef: $photoRef
        global: $global
    ) {
        ...FeedChannelFull
    }
}
mutation FeedChannelUpdate(
    $id: ID!
    $title: String!
    $about: String
    $photoRef: ImageRefInput
    $global: Boolean
) {
    channel: alphaFeedUpdateChannel(
        id: $id
        title: $title
        about: $about
        photoRef: $photoRef
        global: $global
    ) {
        id
    }
}
mutation FeedChannelSubscribe($id: ID!) {
    alphaFeedChannelSubscribe(id: $id)
}
mutation FeedChannelUnsubscribe($id: ID!) {
    alphaFeedChannelUnsubscribe(id: $id)
}
mutation FeedChannelAddWriter($id: ID!, $userId: ID!) {
    alphaFeedChannelAddEditor(id: $id, userId: $userId)
}
mutation FeedChannelRemoveWriter($id: ID!, $userId: ID!) {
    alphaFeedChannelRemoveEditor(id: $id, userId: $userId)
}
query FeedItem($id: ID!) {
    item: alphaFeedItem(id: $id) {
        ...FeedItemFull
    }
}
mutation FeedEditPost($feedItemId: ID!, $slides: [SlideInput!]!) {
    editFeedPost: alphaEditFeedPost(feedItemId: $feedItemId, slides: $slides) {
        ...FeedItemFull
    }
}
mutation FeedCreatePost($channel: ID!, $slides: [SlideInput!]!, $repeatKey: String) {
    post: alphaCreateFeedPost(channel: $channel, slides: $slides, repeatKey: $repeatKey) {
        ...FeedItemFull
    }
}
mutation FeedReactionAdd($feedItemId: ID!, $reaction: MessageReactionType!) {
    feedReactionAdd(feedItemId: $feedItemId, reaction: $reaction)
}
mutation FeedReactionRemove($feedItemId: ID!, $reaction: MessageReactionType!) {
    feedReactionRemove(feedItemId: $feedItemId, reaction: $reaction)
}
mutation FeedDeletePost($feedItemId: ID!) {
    alphaDeleteFeedPost(feedItemId: $feedItemId)
}
fragment FeedUpdateFragment on FeedUpdate {
    ... on FeedItemReceived {
        item {
            ...FeedItemFull
        }
    }
    ... on FeedItemUpdated {
        item {
            ...FeedItemFull
        }
    }
    ... on FeedItemDeleted {
        item {
            ...FeedItemFull
        }
    }
    ... on FeedRebuildNeeded {
        feed: homeFeed {
            items {
                ...FeedItemFull
            }
            cursor
        }
    }
}
subscription FeedUpdates($state: String) {
    event: homeFeedUpdates(fromState: $state) {
        updates {
            ...FeedUpdateFragment
        }
        state
    }
}
