fragment DiscoverSharedRoom on SharedRoom {
    id
    kind
    title
    photo
    membersCount
    membership
    organization {
        id
        name
        photo
    }
    premiumSettings {
        id
        price
        interval
    }
    isPremium
    premiumPassIsActive
    featured
}

fragment DiscoverChatsCollection on DiscoverChatsCollection {
    id
    title
    shortname
    chatsCount
    chats {
        ...DiscoverSharedRoom
    }
    description
    image {
        uuid
        crop {
            x
            y
            w
            h
        }
    }
}

fragment DiscoverChatsCollectionShort on DiscoverChatsCollection {
    id
    title
    shortname
    chatsCount
    description
    image {
        uuid
        crop {
            x
            y
            w
            h
        }
    }
}

fragment DiscoverOrganization on Organization {
    id
    name
    photo
    membersCount
    shortname
    featured: alphaFeatured
}

query ExploreRooms($seed: Int!) {
    activeVoiceChats(first: 3) {
        cursor
        items {
            ...VoiceChatWithSpeakers
        }
    }
    discoverNewAndGrowing(first: 3, seed: $seed) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
    discoverPopularNow(first: 3) {
        items {
            room {
                ...DiscoverSharedRoom
            }
            newMessages
        }
        cursor
    }
    suggestedRooms: betaSuggestedRooms {
        ...DiscoverSharedRoom
    }
    discoverTopPremium(first: 3) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
    discoverTopFree(first: 3) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
    discoverTopOrganizations(first: 3) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
    discoverNewAndGrowingOrganizations(first: 3, seed: $seed) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
    isDiscoverDone: betaIsDiscoverDone
}

query DiscoverNoAuth($seed: Int!) {
    discoverNewAndGrowing(first: 3, seed: $seed) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
    discoverPopularNow(first: 3) {
        items {
            room {
                ...DiscoverSharedRoom
            }
            newMessages
        }
        cursor
    }
    discoverTopPremium(first: 3) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
    discoverTopFree(first: 3) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }

    discoverCollections(first: 20) {
        items {
            ...DiscoverChatsCollectionShort
        }
        cursor
    }

    discoverEditorsChoice {
        id
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
        chat {
            ...DiscoverSharedRoom
        }
    }

    discoverTopOrganizations(first: 3) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
    discoverNewAndGrowingOrganizations(first: 3, seed: $seed) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
}

query SuggestedRooms {
    suggestedRooms: betaSuggestedRooms {
        ... on SharedRoom {
            id
            kind
            title
            photo
            membersCount
            membership
            organization {
                id
                name
                photo
            }
        }
    }
    isDiscoverDone: betaIsDiscoverDone
}
query UserAvailableRooms($first: Int!, $after: String, $query: String) {
    alphaUserAvailableRooms(first: $first, after: $after, query: $query) {
        edges {
            node {
                ...DiscoverSharedRoom
            }
            cursor
        }
        pageInfo {
            hasNextPage
        }
    }
}
query GlobalSearch($query: String!, $kinds: [GlobalSearchEntryKind!]) {
    items: alphaGlobalSearch(query: $query, kinds: $kinds) {
        ... on Organization {
            id
            name
            about
            photo
            shortname
            isCommunity: alphaIsCommunity
            featured: alphaFeatured
        }
        ... on User {
            ...UserShort
        }
        ... on SharedRoom {
            id
            kind
            title
            canSendMessage
            roomPhoto: photo
            membersCount
            membership
            organization {
                id
                name
                photo
            }
            featured
        }
    }
}
query DiscoverNextPage($selectedTagsIds: [String!]!, $excudedGroupsIds: [String!]!) {
    betaNextDiscoverPage: gammaNextDiscoverPage(
        selectedTagsIds: $selectedTagsIds
        excudedGroupsIds: $excudedGroupsIds
    ) {
        chats {
            ...RoomShort
        }
        tagGroup {
            id
            title
            subtitle
            tags {
                id
                title
            }
        }
    }
}
mutation BetaSubmitNextDiscover($selectedTagsIds: [String!]!, $excudedGroupsIds: [String!]!) {
    betaSubmitNextDiscover(selectedTagsIds: $selectedTagsIds, excudedGroupsIds: $excudedGroupsIds) {
        tagGroup {
            id
        }
    }
}
mutation BetaDiscoverSkip($selectedTagsIds: [String!]!) {
    betaDiscoverSkip(selectedTagsIds: $selectedTagsIds) {
        tagGroup {
            id
        }
    }
}
query DiscoverIsDone {
    betaIsDiscoverDone
}
query DiscoverState {
    dialogs(first: 1) {
        items {
            id
        }
    }
}

query DiscoverPopularNow($first: Int!, $after: String) {
    discoverPopularNow(first: $first, after: $after) {
        items {
            room {
                ...DiscoverSharedRoom
            }
            newMessages
        }
        cursor
    }
}
query DiscoverNewAndGrowing($first: Int!, $seed: Int!, $after: String) {
    discoverNewAndGrowing(first: $first, seed: $seed, after: $after) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
}
query DiscoverTopPremium($first: Int!, $after: String) {
    discoverTopPremium(first: $first, after: $after) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
}
query DiscoverTopFree($first: Int!, $after: String) {
    discoverTopFree(first: $first, after: $after) {
        items {
            ...DiscoverSharedRoom
        }
        cursor
    }
}

query DiscoverPopularOrganizations($first: Int!, $after: String) {
    discoverTopOrganizations(first: $first, after: $after) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
}

query DiscoverNewOrganizations($first: Int!, $seed: Int!, $after: String) {
    discoverNewAndGrowingOrganizations(first: $first, seed: $seed, after: $after) {
        items {
            ...DiscoverOrganization
        }
        cursor
    }
}

query DiscoverSuggestedRooms {
    suggestedRooms: betaSuggestedRooms {
        ...DiscoverSharedRoom
    }
}

query DiscoverCollectionsShort($first: Int!, $after: String) {
    discoverCollections(first: $first, after: $after) {
        items {
            ...DiscoverChatsCollectionShort
        }
        cursor
    }
}
query DiscoverCollections($first: Int!, $after: String) {
    discoverCollections(first: $first, after: $after) {
        items {
            ...DiscoverChatsCollection
        }
        cursor
    }
}

query DiscoverCollection($id: ID!) {
    discoverCollection(id: $id) {
        id
        title
        shortname
        description
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
        chats {
            ...DiscoverSharedRoom
        }
    }
}

query DiscoverCollectionShort($id: ID!) {
    discoverCollection(id: $id) {
        id
        title
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
    }
}

mutation DiscoverCollectionsCreate(
    $title: String!
    $description: String
    $image: ImageRefInput!
    $chatIds: [ID!]!
) {
    discoverCollectionsCreate(
        collection: {
            title: $title
            description: $description
            image: $image
            chatIds: $chatIds
        }
    ) {
        id
        title
    }
}
mutation DiscoverCollectionsUpdate(
    $id: ID!
    $title: String!
    $description: String
    $image: ImageRefInput!
    $chatIds: [ID!]!
) {
    discoverCollectionsUpdate(
        id: $id
        input: {
            title: $title
            description: $description
            image: $image
            chatIds: $chatIds
        }
    ) {
        id
        title
    }
}
mutation DiscoverCollectionSetShortname($id: ID!, $shortname: String!) {
    alphaSetCollectionShortName(id: $id, shortname: $shortname)
}
mutation DiscoverCollectionsDelete($id: ID!) {
    discoverCollectionsDelete(id: $id)
}
mutation DiscoverEditorsChoiceCreate($image: ImageRefInput!, $cid: ID!) {
    discoverEditorsChoiceCreate(input: { image: $image, cid: $cid }) {
        id
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
        chat {
            id
            title
        }
    }
}
mutation DiscoverEditorsChoiceUpdate($id: ID!, $image: ImageRefInput!, $cid: ID!) {
    discoverEditorsChoiceUpdate(id: $id, input: { image: $image, cid: $cid }) {
        id
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
        chat {
            id
            title
        }
    }
}
mutation DiscoverEditorsChoiceDelete($id: ID!) {
    discoverEditorsChoiceDelete(id: $id)
}

query DiscoverEditorsChoice {
    discoverEditorsChoice {
        id
        image {
            uuid
            crop {
                x
                y
                w
                h
            }
        }
        chat {
            ...DiscoverSharedRoom
        }
    }
}
