mutation PhonebookAdd($records: [PhonebookRecordInput!]!) {
    phonebookAdd(records: $records)
}

mutation AddToContacts($userId: ID!) {
    addToContacts(userId: $userId)
}

mutation RemoveFromContacts($userId: ID!) {
    removeFromContacts(userId: $userId)
}

query MyContacts($first: Int!, $after: String) {
    myContacts(first: $first, after: $after) {
        items {
            id
            user {
                ...UserShort
            }
        }
        cursor
    }
}

query MyContactsSearch($query: String, $first: Int!, $after: String, $page: Int) {
    myContactsSearch(query: $query, first: $first, after: $after, page: $page) {
        edges {
            node {
                ...UserShort
            }
        }
        pageInfo {
            hasNextPage
            currentPage
        }
    }
}

subscription MyContactsUpdates($state: String) {
    myContactsUpdates(fromState: $state) {
        updates {
            ... on ContactRemoved {
                contact {
                    id
                    user {
                        ...UserShort
                    }
                }
            }
            ... on ContactAdded {
                contact {
                    id
                    user {
                        ...UserShort
                    }
                }
            }
        }
        state
    }
}
